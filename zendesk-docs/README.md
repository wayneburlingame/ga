# Zendesk Docs

A GitHub Action that transforms markdown documents in GitHub repositories and publishes them into a Zendesk Help Center instance.

## Features

- The action transforms all markdown into valid HTML, that can be used inside Help Center articles.
- The action will also transform relative GitHub links into full Zendesk Help Center links. Note that in order for this to work, all the articles need to be defined inside the configuration, so the mapping between the name of the file and the Zendesk Article ID can be worked out.
- The action doesn't care about images or any other documents. We recommend to use absolute URLs when inserting images inside the markdown (if you are looking for an easy way to have images accessible with absolute URLs, you can always add those images to any issue or pull request description and use the autogenerated GitHub link inside the markdown).

## Inputs

- _config_ (required): The location of the configuration file that includes what articles need to be published
- _zendesk_domain_ (required): The FQDN of your Zendesk instance
- _zendesk_admin_email_ (required): The Admin's email that will be used to authenticate with the Zendesk instance and publish the articles.

## Environment variables

- _ZENDESK_TOKEN_ (required): A valid Zendesk Token that has permission to publish articles to Help Center. Please see this [article](https://support.zendesk.com/hc/en-us/articles/4408889192858) to learn how you can generate your own token

## Example

First, define a configuration file anywhere in your repository. For example

```yaml
# In docs/config.yaml
articles:
  - path: example.md # The location of the markdown document, relative to the config file location.
    article_id: 1 # The Zendesk ID of the article
    title: Main # The title of the article
    draft: false # The default behaviour is to mark it as `draft`
```

You will also need to create a Zendesk token. Usually, you will add this as a repository secret.

Then, you can create the actual workflow file. We recommend configuring this workflow to only run on merges to your default branch.

```yaml
name: Publish docs
on: push
  branches:
    - main
jobs:
  main:
    runs-on: ubuntu-latest
    steps:
      - uses: zendesk/checkout@v2
      - name: Auto publish zendesk documentation
        uses: zendesk/ga/zendesk-docs@<release number>
        with:
          config: "docs/config.yaml"
          zendesk_domain: "<your subdomain or FQDN>.zendesk.com"
          zendesk_admin_email: foo@zendesk.com
        env:
          ZENDESK_TOKEN: ${{ secrets.<your secret name> }}
```

And that's it!
