{
  "$id": "stages/deployManifest.json",
  "type": "object",
  "title": "The root schema",
  "description": "The root schema comprises the entire JSON document.",
  "default": {},
  "examples": [
      {
          "account": "pod2",
          "cloudProvider": "kubernetes",
          "completeOtherBranchesThenFail": false,
          "continuePipeline": false,
          "failPipeline": true,
          "manifestArtifact": {
              "artifactAccount": "github",
              "id": "https://api.github.com/repos/zendesk/kb_manifests/contents/projects/popcorn/manifests/staging/pod2/app-server.yml",
              "name": "https://api.github.com/repos/zendesk/kb_manifests/contents/projects/popcorn/manifests/staging/pod2/app-server.yml",
              "reference": "https://api.github.com/repos/zendesk/kb_manifests/contents/projects/popcorn/manifests/staging/pod2/app-server.yml",
              "type": "github/file",
              "version": "${ parameters.branch }"
          },
          "moniker": {
              "app": "pod2",
              "details": "https://spinnaker-instance"
          },
          "name": "app-server-manifest",
          "namespaceOverride": "pod2",
          "refId": "app-server-manifest",
          "requisiteStageRefIds": [],
          "skipExpressionEvaluation": false,
          "source": "artifact",
          "trafficManagement": {
              "enabled": false,
              "options": {
                  "enableTraffic": false,
                  "services": []
              }
          },
          "type": "deployManifest"
      }
  ],
  "required": [
      "account",
      "cloudProvider",
      "completeOtherBranchesThenFail",
      "continuePipeline",
      "failPipeline",
      "manifestArtifact",
      "moniker",
      "name",
      "namespaceOverride",
      "refId",
      "requisiteStageRefIds",
      "skipExpressionEvaluation",
      "source",
      "trafficManagement",
      "type"
  ],
  "properties": {
      "account": {
          "$id": "#/properties/account",
          "type": "string",
          "title": "The account schema",
          "description": "An explanation about the purpose of this instance.",
          "default": "",
          "examples": [
              "pod2"
          ]
      },
      "cloudProvider": {
          "$id": "#/properties/cloudProvider",
          "type": "string",
          "title": "The cloudProvider schema",
          "description": "An explanation about the purpose of this instance.",
          "default": "",
          "examples": [
              "kubernetes"
          ]
      },
      "completeOtherBranchesThenFail": {
          "$id": "#/properties/completeOtherBranchesThenFail",
          "type": "boolean",
          "title": "The completeOtherBranchesThenFail schema",
          "description": "An explanation about the purpose of this instance.",
          "default": false,
          "examples": [
              false
          ]
      },
      "continuePipeline": {
          "$id": "#/properties/continuePipeline",
          "type": "boolean",
          "title": "The continuePipeline schema",
          "description": "An explanation about the purpose of this instance.",
          "default": false,
          "examples": [
              false
          ]
      },
      "failPipeline": {
          "$id": "#/properties/failPipeline",
          "type": "boolean",
          "title": "The failPipeline schema",
          "description": "An explanation about the purpose of this instance.",
          "default": false,
          "examples": [
              true
          ]
      },
      "manifestArtifact": {
          "$id": "#/properties/manifestArtifact",
          "type": "object",
          "title": "The manifestArtifact schema",
          "description": "An explanation about the purpose of this instance.",
          "default": {},
          "examples": [
              {
                  "artifactAccount": "github",
                  "id": "https://api.github.com/repos/zendesk/kb_manifests/contents/projects/popcorn/manifests/staging/pod2/app-server.yml",
                  "name": "https://api.github.com/repos/zendesk/kb_manifests/contents/projects/popcorn/manifests/staging/pod2/app-server.yml",
                  "reference": "https://api.github.com/repos/zendesk/kb_manifests/contents/projects/popcorn/manifests/staging/pod2/app-server.yml",
                  "type": "github/file",
                  "version": "${ parameters.branch }"
              }
          ],
          "required": [
              "artifactAccount",
              "id",
              "name",
              "reference",
              "type",
              "version"
          ],
          "properties": {
              "artifactAccount": {
                  "$id": "#/properties/manifestArtifact/properties/artifactAccount",
                  "type": "string",
                  "title": "The artifactAccount schema",
                  "description": "An explanation about the purpose of this instance.",
                  "default": "",
                  "examples": [
                      "github"
                  ]
              },
              "id": {
                  "$id": "#/properties/manifestArtifact/properties/id",
                  "type": "string",
                  "title": "The id schema",
                  "description": "An explanation about the purpose of this instance.",
                  "default": "",
                  "examples": [
                      "https://api.github.com/repos/zendesk/kb_manifests/contents/projects/popcorn/manifests/staging/pod2/app-server.yml"
                  ]
              },
              "name": {
                  "$id": "#/properties/manifestArtifact/properties/name",
                  "type": "string",
                  "title": "The name schema",
                  "description": "An explanation about the purpose of this instance.",
                  "default": "",
                  "examples": [
                      "https://api.github.com/repos/zendesk/kb_manifests/contents/projects/popcorn/manifests/staging/pod2/app-server.yml"
                  ]
              },
              "reference": {
                  "$id": "#/properties/manifestArtifact/properties/reference",
                  "type": "string",
                  "title": "The reference schema",
                  "description": "An explanation about the purpose of this instance.",
                  "default": "",
                  "examples": [
                      "https://api.github.com/repos/zendesk/kb_manifests/contents/projects/popcorn/manifests/staging/pod2/app-server.yml"
                  ]
              },
              "type": {
                  "$id": "#/properties/manifestArtifact/properties/type",
                  "type": "string",
                  "title": "The type schema",
                  "description": "An explanation about the purpose of this instance.",
                  "default": "",
                  "examples": [
                      "github/file"
                  ]
              },
              "version": {
                  "$id": "#/properties/manifestArtifact/properties/version",
                  "type": "string",
                  "title": "The version schema",
                  "description": "An explanation about the purpose of this instance.",
                  "default": "",
                  "examples": [
                      "${ parameters.branch }"
                  ]
              }
          },
          "additionalProperties": true
      },
      "moniker": {
          "$id": "#/properties/moniker",
          "type": "object",
          "title": "The moniker schema",
          "description": "An explanation about the purpose of this instance.",
          "default": {},
          "examples": [
              {
                  "app": "pod2",
                  "details": "sss"
              }
          ],
          "required": [
              "app",
              "details"
          ],
          "properties": {
              "app": {
                  "$id": "#/properties/moniker/properties/app",
                  "type": "string",
                  "title": "The app schema",
                  "description": "An explanation about the purpose of this instance.",
                  "default": "",
                  "examples": [
                      "pod2"
                  ]
              },
              "details": {
                  "$id": "#/properties/moniker/properties/details",
                  "type": "string",
                  "title": "The details schema",
                  "description": "An explanation about the purpose of this instance.",
                  "default": "",
                  "examples": [
                      "sss"
                  ]
              }
          },
          "additionalProperties": true
      },
      "name": {
          "$id": "#/properties/name",
          "type": "string",
          "title": "The name schema",
          "description": "An explanation about the purpose of this instance.",
          "default": "",
          "examples": [
              "app-server-manifest"
          ]
      },
      "namespaceOverride": {
          "$id": "#/properties/namespaceOverride",
          "type": "string",
          "title": "The namespaceOverride schema",
          "description": "An explanation about the purpose of this instance.",
          "default": "",
          "examples": [
              "pod2"
          ]
      },
      "refId": {
          "$id": "#/properties/refId",
          "type": "string",
          "title": "The refId schema",
          "description": "An explanation about the purpose of this instance.",
          "default": "",
          "examples": [
              "app-server-manifest"
          ]
      },
      "requisiteStageRefIds": {
          "$id": "#/properties/requisiteStageRefIds",
          "type": "array",
          "title": "The requisiteStageRefIds schema",
          "description": "An explanation about the purpose of this instance.",
          "default": [],
          "examples": [
              []
          ],
          "additionalItems": true,
          "items": {
              "$id": "#/properties/requisiteStageRefIds/items"
          }
      },
      "skipExpressionEvaluation": {
          "$id": "#/properties/skipExpressionEvaluation",
          "type": "boolean",
          "title": "The skipExpressionEvaluation schema",
          "description": "An explanation about the purpose of this instance.",
          "default": false,
          "examples": [
              false
          ]
      },
      "source": {
          "$id": "#/properties/source",
          "type": "string",
          "title": "The source schema",
          "description": "An explanation about the purpose of this instance.",
          "default": "",
          "examples": [
              "artifact"
          ]
      },
      "trafficManagement": {
          "$id": "#/properties/trafficManagement",
          "type": "object",
          "title": "The trafficManagement schema",
          "description": "An explanation about the purpose of this instance.",
          "default": {},
          "examples": [
              {
                  "enabled": false,
                  "options": {
                      "enableTraffic": false,
                      "services": []
                  }
              }
          ],
          "required": [
              "enabled",
              "options"
          ],
          "properties": {
              "enabled": {
                  "$id": "#/properties/trafficManagement/properties/enabled",
                  "type": "boolean",
                  "title": "The enabled schema",
                  "description": "An explanation about the purpose of this instance.",
                  "default": false,
                  "examples": [
                      false
                  ]
              },
              "options": {
                  "$id": "#/properties/trafficManagement/properties/options",
                  "type": "object",
                  "title": "The options schema",
                  "description": "An explanation about the purpose of this instance.",
                  "default": {},
                  "examples": [
                      {
                          "enableTraffic": false,
                          "services": []
                      }
                  ],
                  "required": [
                      "enableTraffic",
                      "services"
                  ],
                  "properties": {
                      "enableTraffic": {
                          "$id": "#/properties/trafficManagement/properties/options/properties/enableTraffic",
                          "type": "boolean",
                          "title": "The enableTraffic schema",
                          "description": "An explanation about the purpose of this instance.",
                          "default": false,
                          "examples": [
                              false
                          ]
                      },
                      "services": {
                          "$id": "#/properties/trafficManagement/properties/options/properties/services",
                          "type": "array",
                          "title": "The services schema",
                          "description": "An explanation about the purpose of this instance.",
                          "default": [],
                          "examples": [
                              []
                          ],
                          "additionalItems": true,
                          "items": {
                              "$id": "#/properties/trafficManagement/properties/options/properties/services/items"
                          }
                      }
                  },
                  "additionalProperties": true
              }
          },
          "additionalProperties": true
      },
      "type": {
          "$id": "#/properties/type",
          "type": "string",
          "title": "The type schema",
          "description": "An explanation about the purpose of this instance.",
          "const": "deployManifest"
      }
  },
  "additionalProperties": true
}