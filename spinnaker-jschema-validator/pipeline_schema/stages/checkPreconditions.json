{
  "$id": "stages/checkPreconditions.json",
  "type": "object",
  "title": "The root schema",
  "description": "The root schema comprises the entire JSON document.",
  "default": {},
  "examples": [
      {
          "name": "Check Preconditions",
          "preconditions": [
              {
                  "context": {
                      "stageName": "Manual Judgment",
                      "stageStatus": "RUNNING"
                  },
                  "failPipeline": true,
                  "type": "stageStatus"
              },
              {
                  "cloudProvider": "kubernetes",
                  "context": {
                      "cluster": "asasd",
                      "comparison": "==",
                      "credentials": "pod1",
                      "expected": 3,
                      "regions": []
                  },
                  "failPipeline": true,
                  "type": "clusterSize"
              },
              {
                  "context": {
                      "expression": "asdas",
                      "failureMessage": "asdas"
                  },
                  "failPipeline": true,
                  "type": "expression"
              }
          ],
          "refId": "7",
          "requisiteStageRefIds": [
              "1"
          ],
          "type": "checkPreconditions"
      }
  ],
  "required": [
      "name",
      "preconditions",
      "refId",
      "requisiteStageRefIds",
      "type"
  ],
  "properties": {
      "name": {
          "$id": "#/properties/name",
          "type": "string",
          "title": "The name schema",
          "description": "An explanation about the purpose of this instance.",
          "default": "",
          "examples": [
              "Check Preconditions"
          ]
      },
      "preconditions": {
          "$id": "#/properties/preconditions",
          "type": "array",
          "title": "The preconditions schema",
          "description": "An explanation about the purpose of this instance.",
          "default": [],
          "examples": [
              [
                  {
                      "context": {
                          "stageName": "Manual Judgment",
                          "stageStatus": "RUNNING"
                      },
                      "failPipeline": true,
                      "type": "stageStatus"
                  },
                  {
                      "cloudProvider": "kubernetes",
                      "context": {
                          "cluster": "asasd",
                          "comparison": "==",
                          "credentials": "pod1",
                          "expected": 3,
                          "regions": []
                      },
                      "failPipeline": true,
                      "type": "clusterSize"
                  }
              ]
          ],
          "additionalItems": true,
          "items": {
              "$id": "#/properties/preconditions/items",
              "anyOf": [
                  {
                      "$id": "#/properties/preconditions/items/anyOf/0",
                      "type": "object",
                      "title": "The first anyOf schema",
                      "description": "An explanation about the purpose of this instance.",
                      "default": {},
                      "examples": [
                          {
                              "context": {
                                  "stageName": "Manual Judgment",
                                  "stageStatus": "RUNNING"
                              },
                              "failPipeline": true,
                              "type": "stageStatus"
                          }
                      ],
                      "required": [
                          "context",
                          "failPipeline",
                          "type"
                      ],
                      "properties": {
                          "context": {
                              "$id": "#/properties/preconditions/items/anyOf/0/properties/context",
                              "type": "object",
                              "title": "The context schema",
                              "description": "An explanation about the purpose of this instance.",
                              "default": {},
                              "examples": [
                                  {
                                      "stageName": "Manual Judgment",
                                      "stageStatus": "RUNNING"
                                  }
                              ],
                              "required": [
                                  "stageName",
                                  "stageStatus"
                              ],
                              "properties": {
                                  "stageName": {
                                      "$id": "#/properties/preconditions/items/anyOf/0/properties/context/properties/stageName",
                                      "type": "string",
                                      "title": "The stageName schema",
                                      "description": "An explanation about the purpose of this instance.",
                                      "default": "",
                                      "examples": [
                                          "Manual Judgment"
                                      ]
                                  },
                                  "stageStatus": {
                                      "$id": "#/properties/preconditions/items/anyOf/0/properties/context/properties/stageStatus",
                                      "type": "string",
                                      "title": "The stageStatus schema",
                                      "description": "An explanation about the purpose of this instance.",
                                      "default": "",
                                      "examples": [
                                          "RUNNING"
                                      ]
                                  }
                              },
                              "additionalProperties": true
                          },
                          "failPipeline": {
                              "$id": "#/properties/preconditions/items/anyOf/0/properties/failPipeline",
                              "type": "boolean",
                              "title": "The failPipeline schema",
                              "description": "An explanation about the purpose of this instance.",
                              "default": false,
                              "examples": [
                                  true
                              ]
                          },
                          "type": {
                              "$id": "#/properties/preconditions/items/anyOf/0/properties/type",
                              "type": "string",
                              "title": "The type schema",
                              "description": "An explanation about the purpose of this instance.",
                              "const": "stageStatus"
                          }
                      },
                      "additionalProperties": true
                  },
                  {
                      "$id": "#/properties/preconditions/items/anyOf/1",
                      "type": "object",
                      "title": "The second anyOf schema",
                      "description": "An explanation about the purpose of this instance.",
                      "default": {},
                      "examples": [
                          {
                              "cloudProvider": "kubernetes",
                              "context": {
                                  "cluster": "asasd",
                                  "comparison": "==",
                                  "credentials": "pod1",
                                  "expected": 3,
                                  "regions": []
                              },
                              "failPipeline": true,
                              "type": "clusterSize"
                          }
                      ],
                      "required": [
                          "cloudProvider",
                          "context",
                          "failPipeline",
                          "type"
                      ],
                      "properties": {
                          "cloudProvider": {
                              "$id": "#/properties/preconditions/items/anyOf/1/properties/cloudProvider",
                              "type": "string",
                              "title": "The cloudProvider schema",
                              "description": "An explanation about the purpose of this instance.",
                              "default": "",
                              "examples": [
                                  "kubernetes"
                              ]
                          },
                          "context": {
                              "$id": "#/properties/preconditions/items/anyOf/1/properties/context",
                              "type": "object",
                              "title": "The context schema",
                              "description": "An explanation about the purpose of this instance.",
                              "default": {},
                              "examples": [
                                  {
                                      "cluster": "asasd",
                                      "comparison": "==",
                                      "credentials": "pod1",
                                      "expected": 3,
                                      "regions": []
                                  }
                              ],
                              "required": [
                                  "cluster",
                                  "comparison",
                                  "credentials",
                                  "expected",
                                  "regions"
                              ],
                              "properties": {
                                  "cluster": {
                                      "$id": "#/properties/preconditions/items/anyOf/1/properties/context/properties/cluster",
                                      "type": "string",
                                      "title": "The cluster schema",
                                      "description": "An explanation about the purpose of this instance.",
                                      "default": "",
                                      "examples": [
                                          "asasd"
                                      ]
                                  },
                                  "comparison": {
                                      "$id": "#/properties/preconditions/items/anyOf/1/properties/context/properties/comparison",
                                      "type": "string",
                                      "title": "The comparison schema",
                                      "description": "An explanation about the purpose of this instance.",
                                      "default": "",
                                      "examples": [
                                          "=="
                                      ]
                                  },
                                  "credentials": {
                                      "$id": "#/properties/preconditions/items/anyOf/1/properties/context/properties/credentials",
                                      "type": "string",
                                      "title": "The credentials schema",
                                      "description": "An explanation about the purpose of this instance.",
                                      "default": "",
                                      "examples": [
                                          "pod1"
                                      ]
                                  },
                                  "expected": {
                                      "$id": "#/properties/preconditions/items/anyOf/1/properties/context/properties/expected",
                                      "type": "integer",
                                      "title": "The expected schema",
                                      "description": "An explanation about the purpose of this instance.",
                                      "default": 0,
                                      "examples": [
                                          3
                                      ]
                                  },
                                  "regions": {
                                      "$id": "#/properties/preconditions/items/anyOf/1/properties/context/properties/regions",
                                      "type": "array",
                                      "title": "The regions schema",
                                      "description": "An explanation about the purpose of this instance.",
                                      "default": [],
                                      "examples": [
                                          []
                                      ],
                                      "additionalItems": true,
                                      "items": {
                                          "$id": "#/properties/preconditions/items/anyOf/1/properties/context/properties/regions/items"
                                      }
                                  }
                              },
                              "additionalProperties": true
                          },
                          "failPipeline": {
                              "$id": "#/properties/preconditions/items/anyOf/1/properties/failPipeline",
                              "type": "boolean",
                              "title": "The failPipeline schema",
                              "description": "An explanation about the purpose of this instance.",
                              "default": false,
                              "examples": [
                                  true
                              ]
                          },
                          "type": {
                              "$id": "#/properties/preconditions/items/anyOf/1/properties/type",
                              "type": "string",
                              "title": "The type schema",
                              "description": "An explanation about the purpose of this instance.",
                              "const": "clusterSize"
                          }
                      },
                      "additionalProperties": true
                  },
                  {
                      "$id": "#/properties/preconditions/items/anyOf/2",
                      "type": "object",
                      "title": "The first anyOf schema",
                      "description": "An explanation about the purpose of this instance.",
                      "default": {},
                      "required": [
                          "context",
                          "failPipeline",
                          "type"
                      ],
                      "properties": {
                          "context": {
                              "$id": "#/properties/preconditions/items/anyOf/2/properties/context",
                              "type": "object",
                              "title": "The context schema",
                              "description": "An explanation about the purpose of this instance.",
                              "default": {},
                              "required": [
                                  "expression"
                              ],
                              "properties": {
                                  "expression": {
                                      "$id": "#/properties/preconditions/items/anyOf/2/properties/context/properties/expression",
                                      "type": "string",
                                      "title": "The stageName schema",
                                      "description": "An explanation about the purpose of this instance.",
                                      "default": "",
                                      "examples": [
                                          "Manual Judgment"
                                      ]
                                  }
                              },
                              "additionalProperties": true
                          },
                          "failPipeline": {
                              "$id": "#/properties/preconditions/items/anyOf/2/properties/failPipeline",
                              "type": "boolean",
                              "title": "The failPipeline schema",
                              "description": "An explanation about the purpose of this instance.",
                              "default": false,
                              "examples": [
                                  true
                              ]
                          },
                          "type": {
                              "$id": "#/properties/preconditions/items/anyOf/2/properties/type",
                              "type": "string",
                              "title": "The type schema",
                              "description": "An explanation about the purpose of this instance.",
                              "const": "expression"
                          }
                      },
                      "additionalProperties": true
                  }
              ]
          }
      },
      "refId": {
          "$id": "#/properties/refId",
          "type": "string",
          "title": "The refId schema",
          "description": "An explanation about the purpose of this instance.",
          "default": "",
          "examples": [
              "7"
          ]
      },
      "requisiteStageRefIds": {
          "$id": "#/properties/requisiteStageRefIds",
          "type": "array",
          "title": "The requisiteStageRefIds schema",
          "description": "An explanation about the purpose of this instance.",
          "default": [],
          "examples": [
              [
                  "1"
              ]
          ],
          "additionalItems": true,
          "items": {
              "$id": "#/properties/requisiteStageRefIds/items",
              "anyOf": [
                  {
                      "$id": "#/properties/requisiteStageRefIds/items/anyOf/0",
                      "type": "string",
                      "title": "The first anyOf schema",
                      "description": "An explanation about the purpose of this instance.",
                      "default": "",
                      "examples": [
                          "1"
                      ]
                  }
              ]
          }
      },
      "type": {
          "$id": "#/properties/type",
          "type": "string",
          "title": "The type schema",
          "description": "An explanation about the purpose of this instance.",
          "default": "",
          "examples": [
              "checkPreconditions"
          ]
      }
  },
  "additionalProperties": true
}